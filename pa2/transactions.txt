transactions

3.1 Manager-Level Transactions

The manager should be able to:

    Add, Edit and Delete information for an employee
    	
    	GRANT INSERT, UPDATE, DELETE

    Obtain a sales report for a particular month
    	
    	SELECT MONTH(datetime) as 'month', 
    		SUM(bookingfee) as 'revenue'
    	FROM dates 
    	GROUP BY month 
    	HAVING month = particularmonth;

    Produce a comprehensive listing of all users
    	
    	SELECT * 
    	FROM users
    	JOIN person
    		ON person.ssn = users.ssn;
 
    Produce a list of dates by calendar date or by customer name
    	
    	SELECT * 
    	FROM dates 
    	WHERE DATE(datetime) = calendardate;

    	SELECT CONCAT(firstname,' ',lastname) AS 'name',
    		profile1,profile2,customrep,datetime,location,bookingfee,comments,user1rating,user2rating 
    	FROM dates 
    	JOIN profiles 
    		ON dates.profile1 = profiles.profileid 
    			OR dates.profile2 = profiles.profileid 
    	JOIN person 
    		ON profiles.ssn = person.ssn 
    	WHERE firstname = customerfirstname 
    		AND lastname = customerlastname;

    Produce a summary listing of revenue generated by dates on a particular calendar date or involving a particular customer

    	SELECT DATE(datetime) AS 'date',
    		SUM(bookingfee) AS 'revenue'
    	FROM dates 
    	GROUP BY date 
    	HAVING date = particularcalendardate;

    Determine which customer representative generated most total revenue

    	SELECT CONCAT(firstname,' ',lastname) AS 'name', SUM(bookingfee) AS 'revenue' 
    	FROM dates 
    	JOIN person 
    		ON dates.customrep = person.ssn 
    	GROUP BY customrep 
    	ORDER BY revenue DESC
    	LIMIT 1;

    Determine which customer generated most total revenue
    	
    	SELECT CONCAT(firstname,' ',lastname) AS 'name', 
    		SUM(bookingfee) AS 'revenue' 
    	FROM dates 
    	JOIN profiles 
    		ON dates.profile2 = profiles.profileid 
    	JOIN person 
    		ON person.ssn = profiles.ssn 
    	GROUP BY profile2 
    	ORDER BY revenue DESC 
    	LIMIT 1;

    Produce a list of most active customers
    Produce a list of all customers who have dated a particular customer
    Produce a list of the highest-rated customers
    
    	SELECT CONCAT(firstname,' ',lastname) AS 'name', rating 
    	FROM users 
    	JOIN person 
    		ON person.ssn = users.ssn 
    	ORDER BY rating DESC;
    
    Produce a list of the highest-rated calendar dates to have a date on

    	SELECT date(datetime) as 'date', 
    		round(avg(user1rating/2+user2rating/2),2) as 'average'
    	FROM dates 
    	GROUP BY date 
    	ORDER BY average DESC;


3.2 Customer-Representative-Level Transactions

Customer Representatives should be thought of as date "reservation agents" and should be able to:

    Record a date
    
    	GRANT INSERT

    Add, Edit and Delete information for a customer
    	
    	GRANT INSERT, UPDATE, DELETE

    Produce customer mailing lists
    	
    	SELECT CONCAT(firstname,' ',lastname) AS 'name', 
    		CONCAT(street,', ',city,', ',state,' ',zipcode) AS 'address' 
    	FROM users 
    	JOIN person 
    		ON person.ssn = users.ssn;

    Produce a list of profiles as date suggestions for a given profile (based on that profile's past dates)

3.3 Customer-Level Transactions

Customers with active profiles should be thought of as online daters and should be able to easily browse and search for profiles of interest and set up dates. In particular, they should be able to:

    Make a date with another customer profile
    	
    	GRANT INSERT

    Make a geo-date with another customer profile
    Cancel a date

    	GRANT DELETE
    	
    Comment on a date he/she went on or is going on
    Like another customer's profile
    Refer a Profile B to Profile C so that Profile C can go on a "blind date" with Profile B. 

While customers will not be permitted to access the database directly, they should be able to retrieve the following information for each of their profiles:

    A profile's pending dates
    A profile's past dates
    A profile's favorites list (based on "likes")
    Search for profiles based on physical characteristics, location, etc.
    Most active profiles
    Most highly rated profiles
    Popular geo-date locations
    Personalized date suggestion list 